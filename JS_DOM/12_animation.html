<html>
    <head>
        <meta charset="UTF-8">
        <title>DOM SCRIPT</title>
        <link rel="icon" href="../img/img01.jpg">
        <style>
            #count{
                color: red;
            }
            progress{
                display: none;
                width: 500px;
                height: 25px;
            }
            #proc{
                display: none;
                position: absolute;
                width: 10px;
                height: 10px;
                top:100px;
                left: 10px;
                background-color: red;
            }
        </style>
    </head>
    <body>
        <h1><span id="count">5</span> 초 후 다운로드가 진행 됩니다.</h1>
        <progress id="download" max="100" value="0"></progress>
        <div id="proc"></div>
    </body>
    <script>
        var count = document.getElementById('count');
        var progress = document.getElementById('download');
        var proc = document.getElementById('proc');

        var i = 5;
        var inter = setInterval(function(){
            i--;
            count.innerHTML = i;
        },1000);

        setTimeout(function(){
            clearInterval(inter);
            download();
        },5000);

        function download(){
            var h1 = document.getElementsByTagName('h1')[0];
            var per = 0;
            
            progress.style.display='block';
            proc.style.display='block';

            inter = setInterval(function(){
                per += 10;
                h1.innerHTML = '다운로드 진행중('+per+'%)';
                progress.value = per;
                proc.style.left = per*5;

                if(per>=100){
                    h1.innerHTML = '다운로드 완료';
                    clearInterval(inter);
                }

            },500);
        }
        
        /*
        var coun = document.getElementById('count');
        var down = document.getElementById('download');
        var proc = document.getElementById('proc');
        var cnt = document.getElementsByTagName('h1')[0];
        var inter;
        var dw = 0;
        
        inter = setInterval(function() {
            coun.innerHTML = i;
            i--;
            clearInterval(i==-1);
            if (i==-1) {
                coun.innerHTML = '';
                cnt.innerHTML = '';
                cnt.innerHTML = '다운로드 중';
                down.style.display = 'flex';
                proc.style.display = 'flex';
            }
            
        },1000);

        inter = setInterval(function () {
            
            down.value = dw;
            proc.style.left = 'dw';
                
            dw++;
            if (down.value == 100) {
                cnt.innerHTML = '다운로드 완료';
            }
            
        },100)
        
        */


    </script>
</html>